(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),c=n(14),r=n.n(c),i=n(4),o=n(10),u=n(23),l=n(22),j="SAVE_USER",b="SET_USER_LOGGED_IN",m="SET_USER_LOGGED_OUT",d="SET_USER_POINTS",p="RESET_USER_POINTS",O="SET_GAME_CONFIG",f="SAVE_AVERAGE_ROUND_TIME",h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===j?t.payload:e},x=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return!0;case m:return!1;default:return e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return e+t.payload;case p:return t.payload;default:return e}},_={gamePoints:1500,songTimer:15,songNumber:1,numberOfAnswers:4},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;return t.type===O?t.payload:e},v=n(7),y={totalPoints:0,averageTotalTime:0},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0,n=_.gamePoints,s=_.songNumber,a=(s*n/100-t.payload/100)/s,c=a.toFixed(1);switch(t.type){case f:return Object(v.a)(Object(v.a)({},e),{},{averageTotalTime:c});case d:return Object(v.a)(Object(v.a)({},e),{},{totalPoints:e.totalPoints+t.payload});case p:return{averageTotalTime:0,totalPoints:t.payload};default:return e}},w=Object(o.combineReducers)({isUserLoggedIn:x,currentUser:h,userPoints:g,gameConfig:N,gameStats:S}),T=Object(o.createStore)(w,Object(l.composeWithDevTools)(Object(o.applyMiddleware)(u.a))),E=n(6),A=n(2),k=n(16),P=n(5),C=n.n(P),I=n(9),G=n(3),L=n(0),U=function(e){var t=e.type,n=e.className,s=e.innerText,a=e.onClickFunc;return Object(L.jsx)("button",{type:t,className:"btn ".concat(n,"__btn"),onClick:a,children:s})},R=n(15),Y=function(e){var t=e.placeholder,n=e.className,s=e.formState,a=e.inputName,c=e.inputType,r=Object(G.a)(s,2),i=r[0],o=r[1];return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("label",{id:a,className:"".concat(n,"__label hidden"),children:a}),Object(L.jsx)("input",{type:c,"aria-labelledby":a,placeholder:t,className:"".concat(n,"__input"),value:i[a],onChange:function(e){o((function(t){return Object(v.a)(Object(v.a)({},t),{},Object(R.a)({},a,e.target.value))}))},required:!0})]})},F=function(e){return{type:j,payload:e}},W=function(){return{type:b}},D={username:"",password:""},M=function(e){var t=Object(G.a)(e,2),n=t[0],s=t[1];return function(){var e=Object(I.a)(C.a.mark((function e(t){var a,c,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=3,fetch("/api/users",a);case 3:return c=e.sent,e.next=6,c.json();case 6:return r=e.sent,t(F(r)),t(W()),s(D),e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},B=function(){var e=Object(s.useState)(D),t=Object(G.a)(e,2),n=[t[0],t[1]],a="login-form",c=Object(i.b)(),r=function(){var e=Object(I.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),c(M(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(L.jsxs)("form",{className:a,onSubmit:r,children:[Object(L.jsx)(Y,{formState:n,inputType:"text",inputName:"username",placeholder:"Type your username",className:a}),Object(L.jsx)(U,{className:"login-form",type:"submit",innerText:"CREATE A GAME"})]})},q=function(e){var t=e.title;return Object(L.jsx)("h1",{children:t})},z=function(){var e=Object(i.c)((function(e){return e})).isUserLoggedIn,t=Object(A.f)();return Object(s.useEffect)((function(){e&&t("/userhub")}),[e]),Object(L.jsxs)("section",{className:"login-wrapper",children:[Object(L.jsx)(q,{title:"HELLO YOU"}),Object(L.jsx)("p",{className:"login-wrapper__description",children:"Enter your username to create a music quiz"}),Object(L.jsx)(B,{})]})},H=n.p+"static/media/All_I_Want_For_Christmas_Is_You.893ac235.mp3",V=n.p+"static/media/Break_On_Through.a69b132c.mp3",J=n.p+"static/media/Cant_Get_You_Out_Of_My_Head.82ae7400.mp3",K=n.p+"static/media/Diamonds_Are_A_Girls_Best_Friend.01b56c51.mp3",Q=n.p+"static/media/Feeling_Good.b02bfe0d.mp3",X=[Q,H,V,J,K,Q,n.p+"static/media/September.0010a8f7.mp3",n.p+"static/media/Get_Lucky.4da7401d.mp3",n.p+"static/media/Hey_Joe.cbdd41fa.mp3",n.p+"static/media/I_Want_To_Hold_Your_Hand.4ca7cc8b.mp3",n.p+"static/media/I_Wanna_Dance_with_Somebody.4a0b47e7.mp3",n.p+"static/media/In_The_End.ce8ffb17.mp3",n.p+"static/media/Its_Raining_Men.e57afa3c.mp3",n.p+"static/media/Sandstorm.ac0e80c6.mp3",n.p+"static/media/U_Cant_Touch_This.696254c5.mp3",n.p+"static/media/Summertime.9f6f42b4.mp3",n.p+"static/media/Vibes_and_Stuff.1f10f2e1.mp3",n.p+"static/media/The_End.7e52587f.mp3",n.p+"static/media/Survivor.67e4b78d.mp3",n.p+"static/media/Wake_Me_Up_Before_You_Go_Go.e3b593cb.mp3",n.p+"static/media/Who_Let_The_Dogs_Out.f70cdc7a.mp3",n.p+"static/media/Wish_You_Were_Here.c36db672.mp3",n.p+"static/media/Work_Bitch.e349f3b4.mp3"],Z=n(24),$=n.n(Z),ee=function(e){var t,n=e.playingSong,s=e.songs,a=e.setIsPlaying;return Object(L.jsx)($.a,{src:(t=n,s.find((function(e){return e.includes(t)}))),autoPlay:!0,onCanPlay:function(e){return e.target.play()},onPlay:function(){return a(!0)},controls:!0})},te=n(19),ne=function(e){var t=e.type,n=e.className,s=e.song,a=e.onClickFunc;return Object(L.jsx)("button",{type:t,className:"btn ".concat(n,"__btn-game"),onClick:a,value:s,children:s.replaceAll("_"," ")})},se=function(e){var t=e.time,n=e.timerAction,a=e.setSongPoints,c=e.isPlaying,r=Object(s.useState)(t),i=Object(G.a)(r,2),o=i[0],u=i[1];return Object(s.useEffect)((function(){if("undefined"===typeof c){var e=setInterval((function(){u((function(e){return e-1})),a&&a((function(e){return e-100}))}),1e3),t=setTimeout((function(){n(!1)}),1e3*o);return function(){clearInterval(e),clearTimeout(t)}}return!1}),[]),Object(s.useEffect)((function(){if(c){var e=setInterval((function(){u((function(e){return e-1})),a&&a((function(e){return e-100}))}),1e3),t=setTimeout((function(){n(!1)}),1e3*o);return function(){clearInterval(e),clearTimeout(t)}}return!1}),[c]),Object(L.jsx)("h1",{className:"song-timer",children:o})},ae=function(e){var t=e.currentSong,n=e.songsList,a=e.setAnswered,c=e.setCorrectAnswer,r=e.setSongPoints,o=e.songPoints,u=e.setNumberOfSongs,l=e.isPlaying,j=Object(s.useState)(),b=Object(G.a)(j,2),m=b[0],p=b[1],O=Object(i.c)((function(e){return e})).gameConfig,f=Object(i.b)(),h=function(e){return Object(te.a)(e).sort((function(){return Math.random()-.5}))};Object(s.useEffect)((function(){Object(I.a)(C.a.mark((function e(){var s,a,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(n);case 2:return s=e.sent,e.next=5,s.filter((function(e){return e!==t}));case 5:a=e.sent,c=a.slice(0,O.numberOfAnswers-1),p(h([t].concat(Object(te.a)(c)))),r(O.gamePoints);case 9:case"end":return e.stop()}}),e)})))()}),[t]);var x=function(e){return u((function(e){return e-1})),e&&e.target.value===t?(c(!0),f({type:d,payload:o}),a(!0)):(c(!1),a(!0))},g=function(e){return e?(e.preventDefault(),x(e)):x()};return Object(L.jsxs)("article",{className:"quiz__choices",children:[Object(L.jsx)(se,{time:O.songTimer,timerAction:g,setSongPoints:r,isPlaying:l}),m&&m.map((function(e,t){return Object(L.jsx)(ne,{song:e,className:"quiz",onClickFunc:g},t)}))]})},ce=function(e,t){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch(t,n)},re=function(){var e=Object(I.a)(C.a.mark((function e(t){var n,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(i.c)((function(e){return e})),t=e.userPoints,n=e.gameStats,a=e.currentUser,c=Object(v.a)(Object(v.a)({},n),{},{username:a.username});return Object(s.useEffect)((function(){ce(c,"/api/users/stats/high-scores"),ce(c,"/api/users/stats")}),[]),Object(L.jsxs)("article",{className:"game-result",children:[Object(L.jsxs)("h2",{children:["Your total score is ",t]}),Object(L.jsx)(E.b,{className:"link",to:"/",children:Object(L.jsx)(U,{className:"game-result__exit",type:"submit",innerText:"EXIT QUIZ"})}),Object(L.jsx)(E.b,{className:"link",to:"/leaderboard",children:Object(L.jsx)(U,{className:"leaderboard",innerText:"LEADERBOARD"})})]})},oe=function(e){var t=e.correctAnswer,n=e.setNextSong,a=e.songPoints,c=e.gameOver,r=e.setGameOver,o=e.numberOfSongs,u=Object(i.b)(),l=Object(i.c)((function(e){return e})).userPoints;return Object(s.useEffect)((function(){return 0!==o||(u({type:f,payload:l}),r(!0))}),[o]),Object(L.jsxs)("article",{className:"song-result",children:[t?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("p",{className:"song-result__text emojis",children:"\ud83d\udc4f\ud83c\udffb\ud83d\udc4f\ud83c\udffb\ud83d\udc4f\ud83c\udffb"}),Object(L.jsx)("p",{className:"song-result__text",children:"Good job!"}),Object(L.jsx)("p",{className:"song-result__text",children:"Your answer was correct"}),Object(L.jsxs)("p",{className:"song-result__title",children:["Your result is ",a," points"]})]}):Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("p",{className:"song-result__text emojis",children:"\ud83d\udca9"}),Object(L.jsx)("p",{className:"song-result__text",children:"Sorry!"}),Object(L.jsx)("p",{className:"song-result__text",children:"That was incorrect"})]}),c?Object(L.jsx)(ie,{}):Object(L.jsx)(U,{className:"login-form",type:"submit",innerText:"NEXT SONG",onClickFunc:n})]})},ue=function(){var e=Object(I.a)(C.a.mark((function e(t){var n,s,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",headers:{"Content-Type":"application/json"}},e.next=3,fetch("/api/songs",n);case 3:return s=e.sent,e.next=6,s.json();case 6:return a=e.sent,t(a),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(i.c)((function(e){return e})).gameConfig,t=Object(s.useState)([]),n=Object(G.a)(t,2),a=n[0],c=n[1],r=Object(s.useState)(),o=Object(G.a)(r,2),u=o[0],l=o[1],j=Object(s.useState)(0),b=Object(G.a)(j,2),m=b[0],d=b[1],O=Object(s.useState)(!1),f=Object(G.a)(O,2),h=f[0],x=f[1],g=Object(s.useState)(!1),_=Object(G.a)(g,2),N=_[0],v=_[1],y=Object(s.useState)(!0),S=Object(G.a)(y,2),w=S[0],T=S[1],E=Object(s.useState)(e.gamePoints),A=Object(G.a)(E,2),k=A[0],P=A[1],C=Object(s.useState)(e.songNumber),I=Object(G.a)(C,2),U=I[0],R=I[1],Y=Object(s.useState)(!1),F=Object(G.a)(Y,2),W=F[0],D=F[1],M=Object(s.useState)(!1),B=Object(G.a)(M,2),q=B[0],z=B[1],H=Object(i.b)();Object(s.useEffect)((function(){z(!1),R(e.songNumber),H({type:p,payload:0}),ue(c)}),[]),Object(s.useEffect)((function(){l(a[m])}),[a,m]);return Object(L.jsxs)("section",{className:"quiz",children:[w&&Object(L.jsx)(se,{time:3,timerAction:T}),u&&!h&&!w&&!W&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(ee,{playingSong:u,songs:X,setIsPlaying:z}),Object(L.jsx)(ae,{currentSong:u,songsList:a,setAnswered:x,setCorrectAnswer:v,setSongPoints:P,songPoints:k,numberOfSongs:U,setNumberOfSongs:R,isPlaying:q})]}),h&&!w&&Object(L.jsx)(oe,{setGameOver:D,gameOver:W,correctAnswer:N,setNextSong:function(){x(!1),T(!0),d((function(e){return e+1}))},songPoints:k,numberOfSongs:U})]})},je=function(){var e=Object(s.useState)(),t=Object(G.a)(e,2),n=t[0],a=t[1],c=Object(i.c)((function(e){return e})).currentUser,r=c.username||"YOU",o=Object(s.useRef)(!0);return Object(s.useEffect)((function(){var e=function(){var e=Object(I.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.current){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,re("/api/users/stats/".concat(c.userId));case 4:return t=e.sent,e.abrupt("return",a(t.reverse()));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){o.current=!1}}),[n]),Object(L.jsxs)("section",{className:"welcome-wrapper",children:[Object(L.jsx)(q,{title:"WELCOME ".concat(r.toUpperCase())}),Object(L.jsx)(E.b,{className:"link",to:"/quiz",children:Object(L.jsx)(U,{className:"start-game",innerText:"START"})}),Object(L.jsx)(E.b,{className:"link",to:"/instructions",children:Object(L.jsx)(U,{className:"how-to-play",innerText:"HOW TO PLAY"})}),Object(L.jsx)(E.b,{className:"link",to:"/leaderboard",children:Object(L.jsx)(U,{className:"leaderboard",innerText:"LEADERBOARD"})}),n&&Object(L.jsxs)("ul",{className:"welcome-wrapper__user-stats",children:[Object(L.jsx)("h4",{className:"stats-main-title",children:"Your last three games stats"}),n.map((function(e,t){return t<=2&&Object(L.jsxs)("li",{className:"welcome-wrapper__items-stats",children:[Object(L.jsxs)("p",{className:"stats-title-user",children:["Total score: ",Object(L.jsx)("span",{className:"stats-span",children:e.totalPoints})]}),Object(L.jsxs)("p",{className:"stats-title-user",children:["Average time: ",Object(L.jsxs)("span",{className:"stats-span",children:[e.averageTime," s"]})]})]},t)}))]})]})},be=function(){var e=Object(i.c)((function(e){return e})).gameConfig;return Object(L.jsxs)("section",{className:"instruction-wrapper",children:[Object(L.jsx)("h2",{className:"instruction-wrapper__title",children:"HOW TO PLAY?"}),Object(L.jsx)("p",{className:"instruction-description--title",children:"Welcome to our music quiz!"}),Object(L.jsx)("p",{className:"instruction-description",children:"Music Quiz\u2019 is a fun single-player game where you can test you music knowledge!"}),Object(L.jsx)("p",{className:"instruction-description",children:'Start the game by pressing the "Start" button.'}),Object(L.jsx)("p",{className:"instruction-description",children:"A 3 second countdown will then start. After the countdown, the actual gameplay begins, so be ready! You got 15 seconds to make your guess, with multiple choices. There is ONLY one correct answer."}),Object(L.jsx)("p",{className:"instruction-description",children:"The point system is time based. The faster you get the correct answer, the more points you will recieve. Be aware, wrong answers will award NO points."}),Object(L.jsxs)("p",{className:"instruction-description",children:["Each game consists of ",e.songNumber," rounds. After each game your total score will be displayed and saved to the leaderboard."]}),Object(L.jsx)("p",{className:"instruction-description--last",children:"Good luck and have fun!"}),Object(L.jsx)(E.b,{className:"link",to:"/quiz",children:Object(L.jsx)(U,{className:"start-game",innerText:"START"})}),Object(L.jsx)(E.b,{className:"link",to:"/userhub",children:Object(L.jsx)(U,{className:"back",innerText:"BACK"})})]})},me=function(){var e=Object(s.useState)([]),t=Object(G.a)(e,2),n=t[0],a=t[1];return Object(s.useEffect)((function(){Object(I.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re("/api/users/stats/high-scores/top-10");case 2:t=e.sent,a(t.rows);case 4:case"end":return e.stop()}}),e)})))()}),[]),Object(L.jsxs)("div",{className:"leaderboard-page",children:[Object(L.jsxs)("section",{className:"leaderboard",children:[Object(L.jsx)("h1",{className:"leaderboard__title",children:"Leaderboard"}),Object(L.jsxs)("article",{className:"leaderboard__tags",children:[Object(L.jsx)("h3",{className:"stats-tag-title",children:"Player"}),Object(L.jsx)("h3",{className:"stats-tag-title__score",children:"Score"}),Object(L.jsx)("h3",{className:"stats-tag-title__title",children:"Av time"})]}),n&&Object(L.jsx)("ol",{className:"leaderboard__user-stats",children:n.map((function(e,t){return Object(L.jsxs)("li",{className:"leaderboard__items-stats",children:[Object(L.jsx)("p",{className:"stats-title",children:Object(L.jsx)("span",{className:"stats-span",children:e.username})}),Object(L.jsx)("p",{className:"stats-title",children:Object(L.jsx)("span",{className:"stats-span",children:e.score})}),Object(L.jsx)("p",{className:"stats-title",children:Object(L.jsx)("span",{className:"stats-span",children:e.averageTime})})]},t)}))})]}),Object(L.jsx)(E.b,{className:"link",to:"/userhub",children:Object(L.jsx)(U,{className:"back",innerText:"BACK"})})]})},de=function(){var e=Object(i.c)((function(e){return e})).isUserLoggedIn,t=Object(i.b)(),n=Object(A.f)(),s=new k.a;return Object(L.jsxs)("nav",{className:"nav",children:[Object(L.jsx)(E.b,{className:"link",to:"/",children:Object(L.jsx)("p",{className:"nav__logo",children:"MUSICVAVORS"})}),e&&Object(L.jsx)("button",{className:"nav-logout__btn",onClick:function(){t({type:m}),n("/"),s.remove("user")},children:"LOGOUT"})]})},pe=function(){var e=Object(i.b)();return Object(s.useEffect)((function(){try{var t=window.location.origin.replace(/^http/,"ws"),n=new WebSocket(t),s=new k.a;n.addEventListener("message",(function(e){console.log("e.data",e.data)})),n.addEventListener("open",(function(){console.log("Frontend is open for papi")}));var a=s.get("user");a&&(e(F(a)),e(W()))}catch(c){console.error(c)}}),[]),Object(L.jsx)(E.a,{children:Object(L.jsxs)("div",{className:"App",children:[Object(L.jsx)(de,{}),Object(L.jsxs)(A.c,{children:[Object(L.jsx)(A.a,{path:"/",element:Object(L.jsx)(z,{})}),Object(L.jsx)(A.a,{path:"/userhub",element:Object(L.jsx)(je,{})}),Object(L.jsx)(A.a,{path:"/quiz",element:Object(L.jsx)(le,{})}),Object(L.jsx)(A.a,{path:"/instructions",element:Object(L.jsx)(be,{})}),Object(L.jsx)(A.a,{path:"/results",element:Object(L.jsx)(ie,{})}),Object(L.jsx)(A.a,{path:"/leaderboard",element:Object(L.jsx)(me,{})})]})]})})};n(36);r.a.render(Object(L.jsx)(a.a.StrictMode,{children:Object(L.jsx)(i.a,{store:T,children:Object(L.jsx)(pe,{})})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.f805877f.chunk.js.map